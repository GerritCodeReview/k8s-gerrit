{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "69cb5ead_4bd7562d",
        "filename": "container-images/gerrit-maintenance/Dockerfile",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2025-06-24T14:42:59Z",
      "side": 1,
      "message": "this URL works in a browser if you have a valid gerrit session cookie, using curl you need to authenticate:\n\n```suggestion\n    curl https://gerrit.googlesource.com/a/gerrit/+archive/${GERRIT_VER}/contrib/maintenance.tar.gz | \\\n```",
      "revId": "a9a3c4905f056ebdbe24748e557335ce13731a0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9880fb33_11681351",
        "filename": "container-images/gerrit-maintenance/Dockerfile",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-06-25T06:23:22Z",
      "side": 1,
      "message": "No, it works, since gerrit-review allows anonymous access. If we would do basic auth, the build would be more complicated ,since we don\u0027t want to have credentials in the finished container image.",
      "parentUuid": "69cb5ead_4bd7562d",
      "revId": "a9a3c4905f056ebdbe24748e557335ce13731a0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6a5b9ca_508872ce",
        "filename": "container-images/gerrit-maintenance/Dockerfile",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2025-06-25T08:20:41Z",
      "side": 1,
      "message": "I tried downloading the archive using curl and the server responds with an HTML error page\n\n```\n$ curl https://gerrit.googlesource.com/gerrit/+archive/origin/master/contrib/maintenance.tar.gz -v\n* Host gerrit.googlesource.com:443 was resolved.\n...\n* Connected to gerrit.googlesource.com (172.217.218.82) port 443\n* using HTTP/2\n* [HTTP/2] [1] OPENED stream for https://gerrit.googlesource.com/gerrit/+archive/origin/master/contrib/maintenance.tar.gz\n* [HTTP/2] [1] [:method: GET]\n* [HTTP/2] [1] [:scheme: https]\n* [HTTP/2] [1] [:authority: gerrit.googlesource.com]\n* [HTTP/2] [1] [:path: /gerrit/+archive/origin/master/contrib/maintenance.tar.gz]\n* [HTTP/2] [1] [user-agent: curl/8.12.1]\n* [HTTP/2] [1] [accept: */*]\n\u003e GET /gerrit/+archive/origin/master/contrib/maintenance.tar.gz HTTP/2\n\u003e Host: gerrit.googlesource.com\n\u003e User-Agent: curl/8.12.1\n\u003e Accept: */*\n\u003e\n* Request completely sent off\n\u003c HTTP/2 404\n\u003c cache-control: no-cache, no-store, max-age\u003d0, must-revalidate\n\u003c content-security-policy: script-src \u0027nonce-fu6SBxIJN53Dcf_kj5cWZw\u0027 \u0027unsafe-inline\u0027 \u0027strict-dynamic\u0027 https: http: \u0027unsafe-eval\u0027;object-src \u0027none\u0027;base-uri \u0027self\u0027;report-uri https://csp.withgoogle.com/csp/gerritcodereview/1\n\u003c content-type: text/html; charset\u003dutf-8\n\u003c date: Wed, 25 Jun 2025 08:15:44 GMT\n\u003c expires: Mon, 01 Jan 1990 00:00:00 GMT\n\u003c pragma: no-cache\n\u003c strict-transport-security: max-age\u003d31536000; includeSubDomains; preload\n\u003c x-content-type-options: nosniff\n\u003c x-errorid: 404, STHH-28,EPRRS-218,EPRRS-192,EPR-105,FHEH-39,GSI-279,GSI-124,GSI-161,RR-121;VF-107,AHF-31,VF-34,UPC-210,RF-48,AHF-31,UPC-210,GEHF-31,UPC-210,UP-189,RP-118,MF-147,MS-106,DFDESF-276,SCF-53,GQF-48,MF-149,GGF-186,EBQCF-45,OGCWF-48,HMF-132,STQF-44,AF-180,AF-129,GFF-166,STSFSPSF-172,GFFFCW-259,GFFFCW-259,GFFFCW-259,GFFFCW-259,GFFFCW-259,GFFFCW-259,GFFFCW-259,GFFFCW-259,STSFSPSF-172,GFFGAF-226,AF-125,SCZFI-159,CRF-90,SSF-26,GUUAF-118,MHF-107,EF-83,GAEF-72,GBLHCF-112,STSF-131,SF-54,TTLF-159,DF-170,DF-61,GSI-247,GSI-124,GSI-161,RR-121\n\u003c x-frame-options: SAMEORIGIN\n\u003c x-request-id: 32115624c2424e99939eecb99a53abdd\n\u003c x-xss-protection: 0\n\u003c\n\u003c!DOCTYPE html\u003e\u003chtml lang\u003den\u003e\u003cmeta charset\u003dutf-8\u003e\u003cmeta name\u003dviewport content\u003d\"initial-scale\u003d1, minimum-scale\u003d1, width\u003ddevice-width\"\u003e\u003ctitle\u003eError NOT_FOUND\u003c/title\u003e\u003cstyle\u003e*{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{color:#222;text-align:unset;margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px;}* \u003e body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}pre{white-space:pre-wrap;}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\u003c/style\u003e\u003cstyle\u003ebody{max-width:none;margin-top:0}\u003c/style\u003e\u003cdiv\u003e\u003ca href\u003d//www.google.com\u003e\u003cspan id\u003dlogo aria-label\u003dGoogle\u003e\u003c/span\u003e\u003c/a\u003e\u003cp\u003e\u003cb\u003eNOT_FOUND: Requested entity was not found\u003c/b\u003e\u003cp\u003eYou may not have access to this page. You can retry after signing in.\u003cbr/\u003e\u003ca href\u003d\"https://accounts.google.com/AccountChooser?faa\u003d1\u0026amp;service\u003dgerritcodereview\u0026amp;continue\u003dhttps://gerrit.googlesource.com/login/gerrit/%2Barchive/origin/master/contrib/maintenance.tar.gz\" style\u003d\"font-size: 1.4rem;display: inline-block;margin: 5px 0;font-weight: bold;\"\u003eSign in\u003c/a\u003e\u003cpre\u003e[type.googleapis.com/google.rpc.LocalizedMessage]\nlocale: \u0026quot;en-US\u0026quot;\nmessage: \u0026quot;Cannot parse URL as a Gitiles URL\u0026quot;\n\n[type.googleapis.com/google.rpc.RequestInfo]\nrequest_id: \u0026quot;32115624c2424e99939eecb99a53abdd\u0026quot;\n\n* Connection #0 to host gerrit.googlesource.com left intact\n\u003c/pre\u003e\u003c/div\u003e\n```\n\nwhich says:\n\n```\nNOT_FOUND: Requested entity was not found\n\nYou may not have access to this page. You can retry after signing in.\nSign in\n\n[type.googleapis.com/google.rpc.LocalizedMessage]\nlocale: \"en-US\"\nmessage: \"Cannot parse URL as a Gitiles URL\"\n\n[type.googleapis.com/google.rpc.RequestInfo]\nrequest_id: \"4776757db0c543b7864b843d291c7505\"\n\n* Connection #0 to host gerrit.googlesource.com left intact\n```\n\nWhen I add the `a/` prefix it works",
      "parentUuid": "9880fb33_11681351",
      "revId": "a9a3c4905f056ebdbe24748e557335ce13731a0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc32597b_7d1c72b9",
        "filename": "container-images/gerrit-maintenance/Dockerfile",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-06-27T11:58:25Z",
      "side": 1,
      "message": "But it works when using curl when building the container, locally on my machine and in our CI. Not sure why though.",
      "parentUuid": "a6a5b9ca_508872ce",
      "revId": "a9a3c4905f056ebdbe24748e557335ce13731a0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc2dc660_2651380c",
        "filename": "container-images/gerrit-maintenance/Dockerfile",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2025-06-30T08:02:17Z",
      "side": 1,
      "message": "Acknowledged\n\nok, then let\u0027s try it like this",
      "parentUuid": "dc32597b_7d1c72b9",
      "revId": "a9a3c4905f056ebdbe24748e557335ce13731a0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}