{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1d863bd9_b453c0e0",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/gerrit/config/GerritConfigBuilder.java",
        "patchSetId": 13
      },
      "lineNbr": 202,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2024-06-05T12:03:05Z",
      "side": 1,
      "message": "I guess that this should also be left to the user to optimize.",
      "range": {
        "startLine": 201,
        "startChar": 0,
        "endLine": 202,
        "endChar": 96
      },
      "revId": "c4b65df0d9e13bd16026d686ae8def12ff805ab1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c22a2fcb_0a44e5a8",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/gerrit/config/GerritConfigBuilder.java",
        "patchSetId": 13
      },
      "lineNbr": 202,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2024-06-05T12:47:56Z",
      "side": 1,
      "message": "According with the `events-kafka` documentation [1] there are 2 types of properties that can be defined, those that belong to the plugin itself. And those that are passed down to configure Kafka consumers [2] and producers [3].\n\n- for the first group we could use the defaults values (we defined them explicitly for transparency). This change will provide just `sendStreamEvents` to `true`.\n\n- for the second group maybe makes sense to *update the model* and allow the user to define them in the CR, i.e `autoCommitIntervalMs`, `securityProtocol`, `enableAutoCommit` and `autoOffsetReset`.\n\nI will address it.\n\n\nReferences:\n[1] https://gerrit.googlesource.com/plugins/events-kafka/+/refs/heads/stable-3.9/src/main/resources/Documentation/config.md\n[2] https://docs.confluent.io/platform/current/clients/consumer.html\n[3] https://docs.confluent.io/platform/current/clients/producer.html",
      "parentUuid": "1d863bd9_b453c0e0",
      "range": {
        "startLine": 201,
        "startChar": 0,
        "endLine": 202,
        "endChar": 96
      },
      "revId": "c4b65df0d9e13bd16026d686ae8def12ff805ab1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5368e5ce_8b607309",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/gerrit/config/GerritConfigBuilder.java",
        "patchSetId": 13
      },
      "lineNbr": 202,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2024-06-09T19:42:33Z",
      "side": 1,
      "message": "@thomas.draebing@sap.com I have modelled the events broker in this way:\n```\n  eventsBroker:\n    brokerType: KAFKA\n    eventsKafkaConfig:\n      kafkaProperties:\n          bootstrapServers: \"kafka-service.kafka-zk.svc.cluster.local:9092\"\n          securityProtocol: \"PLAINTEXT\"\n          enableAutoCommit: \"true\"\n          autoCommitIntervalMs: \"1000\"\n          autoOffsetReset: \"latest\"\n      pluginProperties:\n          sendStreamEvents: \"true\"\n```\n\nIn this way we encode the entire plugin configuration in the CR. `kafkaProperties` and `pluginProperties` are serialised into Map\u003cString, String\u003e for simplicity.\n\nIf you are happy with this approach I can rebase this in the chain of changes. (although not all the comments have been addressed) and in this way those changes can be adapted. \n\nNote: I think multisite plugin should be modelled in similar way.",
      "parentUuid": "c22a2fcb_0a44e5a8",
      "range": {
        "startLine": 201,
        "startChar": 0,
        "endLine": 202,
        "endChar": 96
      },
      "revId": "c4b65df0d9e13bd16026d686ae8def12ff805ab1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}