{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3bd84222_e0c7ee94",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2024-05-15T14:16:11Z",
      "side": 1,
      "message": "Skip to content\n[Jenkins]Jenkins\nSearch (âŒ˜+K)\n5\n4\nD029788\n\nDashboard\nK8S-Gerrit\nk8s-gerrit-open-source\nChanges (5)\n02/425502/1\nStatus\nChanges\nBuild with Parameters\nView Configuration\nFull Stage View\nEmbeddable Build Status\nPipeline Syntax\nBuild History\ntrend\nFilter builds...\n#2\nMay 15, 2024, 2:11 PM\n#1\nMay 15, 2024, 2:04 PM\nAtom feed for all\nAtom feed for failures\nChange 02/425502/1\nFull project name: k8s-gerrit-open-source/02%2F425502%2F1\nStage View\nCheckout source\tBuild\tTest container images\tPublish container images\tTest operator\tClean up\nAverage stage times:\n \n5s\n6s\n35s\n10s\n36s\n858ms\n#2\nMay 15\n14:11\nNo Changes\n5s\n6s\n35s\n(paused for 6ms)\t\n10s\n36s\nfailed\t\n858ms\nPermalinks\nLast build (#2), 22 ms ago\nLast failed build (#1), 7 min 4 sec ago\nLast unsuccessful build (#1), 7 min 4 sec ago\nLast completed build (#1), 7 min 4 sec ago\nREST API\nJenkins 2.375.2\nStage Logs (Test operator)\n Shell Script -- export JAVA_HOME\u003d/usr/lib/jvm/java-17-openjdk-amd64 export PATH\u003d$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH cd operator mvn -B clean install (self time 36s)\ne elapsed: 0.169 s - in com.google.gerrit.k8s.operator.server.GerritAdmissionWebhookTest\n[INFO] Running com.google.gerrit.k8s.operator.server.GerritClusterAdmissionWebhookTest\nMay 15, 2024 2:13:03 PM okhttp3.mockwebserver.MockWebServer$2 execute\nINFO: MockWebServer[36721] starting to accept connections\n14:13:03.281 [INFO ] org.eclipse.jetty.server.Server:384 [PID:1205] - jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+7-Debian-1deb11u1\n14:13:03.289 [INFO ] org.eclipse.jetty.server.AbstractConnector:376 [PID:1205] - Started ServerConnector@10cb050{HTTP/1.1, (http/1.1)}{0.0.0.0:38055}\n14:13:03.290 [INFO ] org.eclipse.jetty.server.Server:439 [PID:1205] - Started Server@4f7ba0af{STARTING}[11.0.15,sto\u003d0] @4951ms\n14:13:03.733 [INFO ] org.eclipse.jetty.server.Server:479 [PID:1205] - Stopped Server@4f7ba0af{STOPPING}[11.0.15,sto\u003d0]\n14:13:03.736 [INFO ] org.eclipse.jetty.server.AbstractConnector:431 [PID:1205] - Stopped ServerConnector@10cb050{HTTP/1.1, (http/1.1)}{0.0.0.0:38055}\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.468 s - in com.google.gerrit.k8s.operator.server.GerritClusterAdmissionWebhookTest\n[INFO] Running com.google.gerrit.k8s.operator.tasks.incomingrepl.dependent.IncomingReplicationTaskTest\nMay 15, 2024 2:13:03 PM okhttp3.mockwebserver.MockWebServer$2 execute\nINFO: MockWebServer[57701] starting to accept connections\n14:13:03.775 [WARN ] Default ConfigurationService implementation:61 [PID:1205] - Configuration for reconciler \u0027incomingreplicationtaskreconciler\u0027 was not found. Known reconcilers: None.\n14:13:03.777 [INFO ] Default ConfigurationService implementation:83 [PID:1205] - Created configuration for reconciler com.google.gerrit.k8s.operator.tasks.incomingrepl.IncomingReplicationTaskReconciler with name incomingreplicationtaskreconciler\n14:13:03.791 [WARN ] com.google.gerrit.k8s.operator.api.model.cluster.GerritCluster:78 [PID:1205] - Unable to read Gerrit Operator version from jar.\nMay 15, 2024 2:13:03 PM okhttp3.mockwebserver.MockWebServer$3 processOneRequest\nINFO: MockWebServer[57701] received request: GET /api/v1/namespaces/gerrit/secrets/incoming-repl-secret HTTP/1.1 and responded: HTTP/1.1 200 OK\n14:13:03.953 [WARN ] com.google.gerrit.k8s.operator.api.model.cluster.GerritCluster:78 [PID:1205] - Unable to read Gerrit Operator version from jar.\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.235 s - in com.google.gerrit.k8s.operator.tasks.incomingrepl.dependent.IncomingReplicationTaskTest\n[INFO] Running com.google.gerrit.k8s.operator.cluster.dependent.GerritClusterGerritsTest\n14:13:03.987 [WARN ] com.google.gerrit.k8s.operator.api.model.cluster.GerritCluster:78 [PID:1205] - Unable to read Gerrit Operator version from jar.\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s - in com.google.gerrit.k8s.operator.cluster.dependent.GerritClusterGerritsTest\n[INFO] Running com.google.gerrit.k8s.operator.cluster.GerritRepositoryConfigTest\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in com.google.gerrit.k8s.operator.cluster.GerritRepositoryConfigTest\n[INFO] Running com.google.gerrit.k8s.operator.gerrit.config.GerritConfigBuilderTest\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in com.google.gerrit.k8s.operator.gerrit.config.GerritConfigBuilderTest\n[INFO] \n[INFO] Results:\n[INFO] \n[ERROR] Failures: \n[ERROR]   GerritClusterAmbassadorTest.expectedGerritClusterAmbassadorComponentsCreated:55 Not true that \u003cMappingSpec(add_linkerd_headers\u003dnull, add_request_headers\u003dnull, add_response_headers\u003dnull, allow_upgrade\u003dnull, ambassador_id\u003d[my-id-1, my-id-2], auth_context_extensions\u003dnull, auto_host_rewrite\u003dnull, bypass_auth\u003dtrue, bypass_error_response_overrides\u003dnull, case_sensitive\u003dnull, circuit_breakers\u003dnull, cluster_idle_timeout_ms\u003dnull, cluster_max_connection_lifetime_ms\u003dnull, cluster_tag\u003dnull, connect_timeout_ms\u003dnull, cors\u003dnull, dns_type\u003dnull, docs\u003dnull, enable_ipv4\u003dnull, enable_ipv6\u003dnull, envoy_override\u003dnull, error_response_overrides\u003dnull, grpc\u003dnull, headers\u003dnull, host\u003dexample.com, host_redirect\u003dnull, host_regex\u003dnull, host_rewrite\u003dnull, idle_timeout_ms\u003dnull, keepalive\u003dnull, labels\u003dnull, load_balancer\u003dnull, method\u003dGET, method_regex\u003dnull, modules\u003dnull, outlier_detection\u003dnull, path_redirect\u003dnull, precedence\u003dnull, prefix\u003d/.*/info/refs, prefix_exact\u003dnull, prefix_redirect\u003dnull, prefix_regex\u003dtrue, priority\u003dnull, query_parameters\u003dQuery_parameters(additionalProperties\u003d{service\u003dgit-upload-pack}), redirect_response_code\u003dnull, regex_headers\u003dnull, regex_query_parameters\u003dnull, regex_redirect\u003dnull, regex_rewrite\u003dnull, resolver\u003dnull, respect_dns_ttl\u003dnull, retry_policy\u003dnull, rewrite\u003d, service\u003dreceiver:48081, shadow\u003dnull, timeout_ms\u003dnull, use_websocket\u003dnull, v3StatsName\u003dnull, v3health_checks\u003dnull, weight\u003dnull, additionalProperties\u003d{})\u003e is equal to \u003cMappingSpec(add_linkerd_headers\u003dnull, add_request_headers\u003dnull, add_response_headers\u003dnull, allow_upgrade\u003dnull, ambassador_id\u003d[my-id-1, my-id-2], auth_context_extensions\u003dnull, auto_host_rewrite\u003dnull, bypass_auth\u003dtrue, bypass_error_response_overrides\u003dnull, case_sensitive\u003dnull, circuit_breakers\u003dnull, cluster_idle_timeout_ms\u003dnull, cluster_max_connection_lifetime_ms\u003dnull, cluster_tag\u003dnull, connect_timeout_ms\u003dnull, cors\u003dnull, dns_type\u003dnull, docs\u003dnull, enable_ipv4\u003dnull, enable_ipv6\u003dnull, envoy_override\u003dnull, error_response_overrides\u003dnull, grpc\u003dnull, headers\u003dnull, host\u003dexample.com, host_redirect\u003dnull, host_regex\u003dnull, host_rewrite\u003dnull, idle_timeout_ms\u003dnull, keepalive\u003dnull, labels\u003dnull, load_balancer\u003dnull, method\u003dGET, method_regex\u003dnull, modules\u003dnull, outlier_detection\u003dnull, path_redirect\u003dnull, precedence\u003dnull, prefix\u003d/.*/info/refs, prefix_exact\u003dnull, prefix_redirect\u003dnull, prefix_regex\u003dtrue, priority\u003dnull, query_parameters\u003dQuery_parameters(additionalProperties\u003d{service\u003dgit-receive-pack}), redirect_response_code\u003dnull, regex_headers\u003dnull, regex_query_parameters\u003dnull, regex_redirect\u003dnull, regex_rewrite\u003dnull, resolver\u003dnull, respect_dns_ttl\u003dnull, retry_policy\u003dnull, rewrite\u003d, service\u003dreceiver:48081, shadow\u003dnull, timeout_ms\u003dnull, use_websocket\u003dnull, v3StatsName\u003dnull, v3health_checks\u003dnull, weight\u003dnull, additionalProperties\u003d{})\u003e\n[ERROR]   GerritClusterAmbassadorTest.expectedGerritClusterAmbassadorComponentsCreated:55 Not true that \u003cMappingSpec(add_linkerd_headers\u003dnull, add_request_headers\u003dnull, add_response_headers\u003dnull, allow_upgrade\u003dnull, ambassador_id\u003d[my-id-1, my-id-2], auth_context_extensions\u003dnull, auto_host_rewrite\u003dnull, bypass_auth\u003dtrue, bypass_error_response_overrides\u003dnull, case_sensitive\u003dnull, circuit_breakers\u003dnull, cluster_idle_timeout_ms\u003dnull, cluster_max_connection_lifetime_ms\u003dnull, cluster_tag\u003dnull, connect_timeout_ms\u003dnull, cors\u003dnull, dns_type\u003dnull, docs\u003dnull, enable_ipv4\u003dnull, enable_ipv6\u003dnull, envoy_override\u003dnull, error_response_overrides\u003dnull, grpc\u003dnull, headers\u003dnull, host\u003dexample.com, host_redirect\u003dnull, host_regex\u003dnull, host_rewrite\u003dnull, idle_timeout_ms\u003dnull, keepalive\u003dnull, labels\u003dnull, load_balancer\u003dnull, method\u003dGET, method_regex\u003dnull, modules\u003dnull, outlier_detection\u003dnull, path_redirect\u003dnull, precedence\u003dnull, prefix\u003d/.*/info/refs, prefix_exact\u003dnull, prefix_redirect\u003dnull, prefix_regex\u003dtrue, priority\u003dnull, query_parameters\u003dQuery_parameters(additionalProperties\u003d{service\u003dgit-upload-pack}), redirect_response_code\u003dnull, regex_headers\u003dnull, regex_query_parameters\u003dnull, regex_redirect\u003dnull, regex_rewrite\u003dnull, resolver\u003dnull, respect_dns_ttl\u003dnull, retry_policy\u003dnull, rewrite\u003d, service\u003dreceiver:48081, shadow\u003dnull, timeout_ms\u003dnull, use_websocket\u003dnull, v3StatsName\u003dnull, v3health_checks\u003dnull, weight\u003dnull, additionalProperties\u003d{})\u003e is equal to \u003cMappingSpec(add_linkerd_headers\u003dnull, add_request_headers\u003dnull, add_response_headers\u003dnull, allow_upgrade\u003dnull, ambassador_id\u003d[my-id-1, my-id-2], auth_context_extensions\u003dnull, auto_host_rewrite\u003dnull, bypass_auth\u003dtrue, bypass_error_response_overrides\u003dnull, case_sensitive\u003dnull, circuit_breakers\u003dnull, cluster_idle_timeout_ms\u003dnull, cluster_max_connection_lifetime_ms\u003dnull, cluster_tag\u003dnull, connect_timeout_ms\u003dnull, cors\u003dnull, dns_type\u003dnull, docs\u003dnull, enable_ipv4\u003dnull, enable_ipv6\u003dnull, envoy_override\u003dnull, error_response_overrides\u003dnull, grpc\u003dnull, headers\u003dnull, host\u003dexample.com, host_redirect\u003dnull, host_regex\u003dnull, host_rewrite\u003dnull, idle_timeout_ms\u003dnull, keepalive\u003dnull, labels\u003dnull, load_balancer\u003dnull, method\u003dGET, method_regex\u003dnull, modules\u003dnull, outlier_detection\u003dnull, path_redirect\u003dnull, precedence\u003dnull, prefix\u003d/.*/info/refs, prefix_exact\u003dnull, prefix_redirect\u003dnull, prefix_regex\u003dtrue, priority\u003dnull, query_parameters\u003dQuery_parameters(additionalProperties\u003d{service\u003dgit-receive-pack}), redirect_response_code\u003dnull, regex_headers\u003dnull, regex_query_parameters\u003dnull, regex_redirect\u003dnull, regex_rewrite\u003dnull, resolver\u003dnull, respect_dns_ttl\u003dnull, retry_policy\u003dnull, rewrite\u003d, service\u003dreceiver:48081, shadow\u003dnull, timeout_ms\u003dnull, use_websocket\u003dnull, v3StatsName\u003dnull, v3health_checks\u003dnull, weight\u003dnull, additionalProperties\u003d{})\u003e\n[INFO] \n[ERROR] Tests run: 50, Failures: 2, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  34.914 s\n[INFO] Finished at: 2024-05-15T14:13:04Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project operator: There are test failures.\n[ERROR] \n[ERROR] Please refer to /home/jenkins/workspace/s-gerrit-open-source_02_425502_1/operator/target/surefire-reports for the individual test results.\n[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\n[ERROR] -\u003e [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException",
      "revId": "dee79c2dcf19374cf5d5f893369fba05f32df46d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a69074a_877c2bb9",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/network/ambassador/dependent/GerritClusterMappingReceiverGET.java",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2024-05-15T14:16:11Z",
      "side": 1,
      "message": "this change breaks the tests",
      "range": {
        "startLine": 55,
        "startChar": 71,
        "endLine": 55,
        "endChar": 88
      },
      "revId": "dee79c2dcf19374cf5d5f893369fba05f32df46d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "61f2585e_2ef1b850",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/network/ambassador/dependent/GerritClusterMappingReceiverGET.java",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2024-05-15T14:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a69074a_877c2bb9",
      "range": {
        "startLine": 55,
        "startChar": 71,
        "endLine": 55,
        "endChar": 88
      },
      "revId": "dee79c2dcf19374cf5d5f893369fba05f32df46d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}