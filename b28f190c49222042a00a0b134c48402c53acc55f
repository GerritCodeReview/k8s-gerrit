{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ca91e4de_8731cc19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-01-31T12:20:16Z",
      "side": 1,
      "message": "Thanks a lot @thomas.draebing@sap.com for providing this, very much appreciated !",
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc37fef6_7c979191",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1161425
      },
      "writtenOn": "2024-01-31T12:36:18Z",
      "side": 1,
      "message": "Yes, very appreciated ! Thank you.",
      "parentUuid": "ca91e4de_8731cc19",
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5d40a24_fb243459",
        "filename": "Documentation/examples/gerritcluster.yaml",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-01-31T12:25:53Z",
      "side": 1,
      "message": "```suggestion\napiVersion: \"gerritoperator.google.com/v1beta3\"\n```",
      "range": {
        "startLine": 49,
        "startChar": 39,
        "endLine": 49,
        "endChar": 46
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33f92b5c_d6ac2cde",
        "filename": "Documentation/examples/gerritcluster.yaml",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1161425
      },
      "writtenOn": "2024-01-31T12:35:21Z",
      "side": 1,
      "message": "Either minikube is slow or probes are too aggressive, in this case the container is restarted before gerrit is ready.\n\nManaged to make it work only with an initial delay of 120 s",
      "range": {
        "startLine": 92,
        "startChar": 8,
        "endLine": 92,
        "endChar": 30
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "698bf80b_991815c0",
        "filename": "Documentation/examples/gerritcluster.yaml",
        "patchSetId": 1
      },
      "lineNbr": 99,
      "author": {
        "id": 1161425
      },
      "writtenOn": "2024-01-31T12:35:21Z",
      "side": 1,
      "message": "Same problem, added 120s for readiness to work",
      "range": {
        "startLine": 99,
        "startChar": 8,
        "endLine": 99,
        "endChar": 30
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9509f7e_78f1bb16",
        "filename": "Documentation/examples/gerritcluster.yaml",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1161425
      },
      "writtenOn": "2024-01-31T12:35:21Z",
      "side": 1,
      "message": "cahnged to 8080 and was able to access it from browser by forwarding the port of the container i.e.\n`kubectl port-forward gerrit-0 8080:8080`",
      "range": {
        "startLine": 114,
        "startChar": 18,
        "endLine": 114,
        "endChar": 20
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4eb06ec3_ec391a7c",
        "filename": "Documentation/operator.md",
        "patchSetId": 1
      },
      "lineNbr": 349,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2024-01-31T12:11:50Z",
      "side": 1,
      "message": "I am following the instructions proposed in the Documentation in my environment: \n\n- Apple M2 \n- Docker Desktop: 4.25.0 (126437)\n- Kubernetes Client Version: v1.29.1\n- Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3\n- Kubernetes Server Version: v1.28.3\n- Helm: version.BuildInfo{Version:\"v3.14.0\", GitCommit:\"3fc9f4b2638e76f26739cd77c7017139be81d0ea\", GitTreeState:\"clean\", GoVersion:\"go1.21.6\"}\n- Minikube version v1.32.0 with 4 cpus and 8192 memory:\n\nBut the Gerrit init container crashes with the following message:\n\n\n```\n[2024-01-31 11:30:43,851] INFO Existing gerrit.config found.                                                                                                                                                                        \nGenerating SSH host key ... rsa...Exception in thread \"main\" java.io.IOException: Cannot run program \"ssh-keygen\": error\u003d0, Failed to exec spawn helper: pid: 56, exit value: 1                                                     \n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1143)                                                                                                                                                           \n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)                                                                                                                                                           \n    at com.google.gerrit.pgm.init.InitSshd.generateSshHostKeys(InitSshd.java:114)                                                                                                                                                   \n    at com.google.gerrit.pgm.init.InitSshd.run(InitSshd.java:72)                                                                                                                                                                    \n    at com.google.gerrit.pgm.init.SitePathInitializer.run(SitePathInitializer.java:92)                                                                                                                                              \n    at com.google.gerrit.pgm.init.BaseInit.run(BaseInit.java:115)                                                                                                                                                                   \n    at com.google.gerrit.pgm.util.AbstractProgram.main(AbstractProgram.java:62)                                                                                                                                                     \n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                               \n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)                                                                                                                             \n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                                                                                                                     \n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)                                                                                                                                                                   \n    at com.google.gerrit.launcher.GerritLauncher.invokeProgram(GerritLauncher.java:252)                                                                                                                                             \n    at com.google.gerrit.launcher.GerritLauncher.mainImpl(GerritLauncher.java:148)                                                                                                                                                  \n    at com.google.gerrit.launcher.GerritLauncher.main(GerritLauncher.java:93)                                                                                                                                                       \n    at Main.main(Main.java:30)                                                                                                                                                                                                      \nCaused by: java.io.IOException: error\u003d0, Failed to exec spawn helper: pid: 56, exit value: 1                                                                                                                                        \n    at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)                                                                                                                                                                   \n    at java.base/java.lang.ProcessImpl.\u003cinit\u003e(ProcessImpl.java:314)                                                                                                                                                                 \n    at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:244)                                                                                                                                                                  \n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)                                                                                                                                                           \n    ... 14 more                                                                                                                                                                                                                     \nTraceback (most recent call last):                                                                                                                                                                                                  \n  File \"\u003cfrozen runpy\u003e\", line 198, in _run_module_as_main                                                                                                                                                                           \n  File \"\u003cfrozen runpy\u003e\", line 88, in _run_code                                                                                                                                                                                      \n  File \"/var/tools/gerrit-initializer/__main__.py\", line 18, in \u003cmodule\u003e                                                                                                                                                            \n    main()                                                                                                                                                                                                                          \n  File \"/var/tools/gerrit-initializer/main.py\", line 89, in main                                                                                                                                                                    \n    args.func(args)\n  File \"/var/tools/gerrit-initializer/main.py\", line 31, in _run_init                                                                                                                                                               \n    init.GerritInit(args.site, config).execute()                                                                                                                                                                                    \n  File \"/var/tools/gerrit-initializer/initializer/tasks/init.py\", line 210, in execute                                                                                                                                              \n    init_process \u003d subprocess.run(                                                                                                                                                                                                  \n                   ^^^^^^^^^^^^^^^                                                                                                                                                                                                  \n  File \"/usr/lib/python3.11/subprocess.py\", line 571, in run                                                                                                                                                                        \n    raise CalledProcessError(retcode, process.args,                                                                                                                                                                                 \n  subprocess.CalledProcessError: Command \u0027[\u0027java\u0027, \u0027-jar\u0027, \u0027/var/war/gerrit.war\u0027, \u0027init\u0027, \u0027--no-auto-start\u0027, \u0027--batch\u0027, \u0027--dev\u0027, \u0027-d\u0027, \u0027/var/gerrit\u0027]\u0027 returned non-zero exit status 1.                                               \n  Stream closed EOF for gerrit/gerrit-0 (gerrit-init)\n```",
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d8dc027_89f9298b",
        "filename": "Documentation/operator.md",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-01-31T12:20:16Z",
      "side": 1,
      "message": "Should we have a pre-requisite section where we indicate that `helm` needs to be installed and the version we recommend for this guide?",
      "range": {
        "startLine": 368,
        "startChar": 0,
        "endLine": 368,
        "endChar": 4
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1529e18b_943f307b",
        "filename": "Documentation/operator.md",
        "patchSetId": 1
      },
      "lineNbr": 382,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-01-31T12:20:16Z",
      "side": 1,
      "message": "Shouldn\u0027t you creating the `gerrit` namespace first?\nOtherwise the deployment would fail with:\n```\nError from server (NotFound): error when creating \"Documentation/examples/gerritcluster.yaml\": namespaces \"gerrit\" not found\n```",
      "range": {
        "startLine": 382,
        "startChar": 14,
        "endLine": 382,
        "endChar": 44
      },
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0285a36_63b1afd6",
        "filename": "Documentation/operator.md",
        "patchSetId": 1
      },
      "lineNbr": 385,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2024-01-31T11:06:40Z",
      "side": 1,
      "message": "should you add `Documentation/examples/gerritcluster.yaml`:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: gerrit\n  labels:\n    istio-injection: enabled\n```",
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08d5edc2_44740ee2",
        "filename": "Documentation/operator.md",
        "patchSetId": 1
      },
      "lineNbr": 389,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2024-01-31T12:31:26Z",
      "side": 1,
      "message": "maybe we can add the command?:\n```\nkubectl port-forward gerrit-0 8080:8080\n```",
      "revId": "b28f190c49222042a00a0b134c48402c53acc55f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}