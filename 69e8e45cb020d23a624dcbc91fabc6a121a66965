{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "183cdf73_ad21db10",
        "filename": "/COMMIT_MSG",
        "patchSetId": 20
      },
      "lineNbr": 15,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "nit: users",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 4
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5980a2f5_1d88f9ef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 20
      },
      "lineNbr": 15,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-26T20:57:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "183cdf73_ad21db10",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 4
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "add23c54_83a5e6ce",
        "filename": "/COMMIT_MSG",
        "patchSetId": 20
      },
      "lineNbr": 22,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "nit: inconsistent indentation compared to below",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 29
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7328cdd_97844be7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 20
      },
      "lineNbr": 22,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-26T20:57:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "add23c54_83a5e6ce",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 29
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cec587d2_09d7b982",
        "filename": "Documentation/operator-api-reference.md",
        "patchSetId": 20
      },
      "lineNbr": 915,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "I think using Ambassador for authentication will at least fail for the receiver, since it is basically hardcoded to use htpasswd to.store its own set of credentials. This could be changed, but should be done in a separate change. For now, I would always use this option for the receive mapping.\n\nI would further document, that not bypassing authentication requires to use `HTTP` or `HTTP_LDAP` auth modes in Gerrit (or am I wrong). Better even, enforce it using a validation webhook.",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 915,
        "endChar": 119
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ee046fb_8edb6578",
        "filename": "Documentation/operator-api-reference.md",
        "patchSetId": 20
      },
      "lineNbr": 915,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-27T17:40:55Z",
      "side": 1,
      "message": "Thinking about this more, I\u0027ll just remove this option from the configuration (i.e. do not let users specify this). I\u0027ll hard-code bypass_auth to be true. This is because there\u0027s no point really in 2 layers of authentication for Gerrit, right? That is, Gerrit itself has an authentication mechanism (auth.type), so no point in using an external authentication service, on top of Gerrit authentication?",
      "parentUuid": "cec587d2_09d7b982",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 915,
        "endChar": 119
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "134478e6_0dec7473",
        "filename": "Documentation/operator-api-reference.md",
        "patchSetId": 20
      },
      "lineNbr": 915,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-28T07:36:59Z",
      "side": 1,
      "message": "It depends. Gerrit itself does not provide any authentication service. If you use LDAP, OAUTH, OPENID or SAML, authentication requests will be send to the configured IDP by Gerrit, i.e. the ingress itself is not involved. But there are also the `HTTP` and `HTTP_LDAP` auth types. If those are chosen, Gerrit expects the loadbalancer/proxy to perform the authentication and to set a header providing the username. It will then trust all requests and will not perform any further authentication. In this case, the authentication would have to be done in Ambassador.\nIn istio doing authentication in the proxy just requires configuring an authentication provider in the core istio CRD and to apply a AuthenticationPolicy that references the gateway/host that this policy applies to. Thus, no specific configuration in the components set up by the operator is required.\nFor the Nginx Ingress Controller, this would be done using annotations, which can be provided in the GerritCluster CRD.\nHowever, I believe that this would still not work as expected, since currently there is no differentiation between git and other requests in the request routing, i.e. the ingress would also try to authenticate git requests, which will most likely not be supported by the git client.\nThus, using the ingress also to authenticate requests is not fully supported. Thus, I guess hard-coding bypass_auth to true should be fine for now.",
      "parentUuid": "9ee046fb_8edb6578",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 915,
        "endChar": 119
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c17932e7_8d983364",
        "filename": "helm-charts/gerrit-operator-crds/templates/gerritclusters.gerritoperator.google.com-v1.yml",
        "patchSetId": 20
      },
      "lineNbr": 133,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "The CRD version wasn\u0027t bumped.",
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "536b2b38_769951b6",
        "filename": "helm-charts/gerrit-operator-crds/templates/gerritclusters.gerritoperator.google.com-v1.yml",
        "patchSetId": 20
      },
      "lineNbr": 133,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-26T20:57:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c17932e7_8d983364",
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89d2a341_66063b84",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/shared/model/GerritIngressAmbassadorConfig.java",
        "patchSetId": 20
      },
      "lineNbr": 21,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "When not assigning a value, the default for a boolean is already `false`",
      "range": {
        "startLine": 21,
        "startChar": 28,
        "endLine": 21,
        "endChar": 36
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22c7f202_7d187534",
        "filename": "operator/src/main/java/com/google/gerrit/k8s/operator/shared/model/GerritIngressAmbassadorConfig.java",
        "patchSetId": 20
      },
      "lineNbr": 21,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-26T20:57:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89d2a341_66063b84",
      "range": {
        "startLine": 21,
        "startChar": 28,
        "endLine": 21,
        "endChar": 36
      },
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7296b4dd_35ed3f89",
        "filename": "operator/src/main/resources/crd/emissary-crds.yaml",
        "patchSetId": 20
      },
      "lineNbr": 1941,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-09-26T06:53:55Z",
      "side": 1,
      "message": "Just to make sure:\n- Is the source of the added content the same file as the rest? Otehrwise, also add links to the other source files.\n- Are there any modifications?",
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8286bc4_5a30de84",
        "filename": "operator/src/main/resources/crd/emissary-crds.yaml",
        "patchSetId": 20
      },
      "lineNbr": 1941,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-26T20:57:03Z",
      "side": 1,
      "message": "Same source. Modifications added to commit message.",
      "parentUuid": "7296b4dd_35ed3f89",
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "113ea496_ac5adb9a",
        "filename": "operator/src/main/resources/crd/emissary-crds.yaml",
        "patchSetId": 20
      },
      "lineNbr": 1941,
      "author": {
        "id": 1162586
      },
      "writtenOn": "2023-09-27T17:40:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8286bc4_5a30de84",
      "revId": "69e8e45cb020d23a624dcbc91fabc6a121a66965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}